webpackJsonp([4],{648:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(5),i=t(n),r=a(256),s=a(823),c=t(s),o=a(703),l=function(t){return i.default.createElement(c.default,t)},u=function(t){return{accountList:t.accountList}},f=function(t){return{fetchList:function(){t((0,o.fetchList)())}}};e.default=(0,r.connect)(u,f)(l)}).call(this)}finally{}},702:function(t,e,a){try{(function(){"use strict";function t(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.editAccount=e.delAccount=e.fetchListSuccess=e.addAccount=e.fetchList=void 0;var n=(a(255),a(163)),i=t(n),r=(e.fetchList=function(){return function(t){var e=[],a=JSON.parse(localStorage.getItem("data"));null!==a&&(e=a.list),t(r(e))}},e.addAccount=function(t){var e=t.value,a=t.date,n=t.bak,r=t.tag,s=t.isExpense;return{type:i.ADD_ACCOUNT,value:e,date:a,bak:n,tag:r,isExpense:s}},e.fetchListSuccess=function(t){return{type:i.FETCH_LIST_SUCCESS,data:t}});e.delAccount=function(t){var e=t.blockIndex,a=t.itemIndex;return{type:i.DEL_ACCOUNT,blockIndex:e,itemIndex:a}},e.editAccount=function(t){var e=t.blockIndex,a=t.itemIndex,n=t.value,r=t.date,s=t.bak,c=t.tag,o=t.isExpense;return{type:i.EDIT_ACCOUNT,blockIndex:e,itemIndex:a,value:n,date:r,bak:s,tag:c,isExpense:o}}}).call(this)}finally{}},703:function(t,e,a){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delSearchRes=e.editAccount=e.delAccount=e.fetchTagListSuccess=e.fetchTagList=e.fetchListSuccess=e.fetchList=e.addAccount=void 0;var t=a(702),n=a(705),i=a(704);e.addAccount=t.addAccount,e.fetchList=t.fetchList,e.fetchListSuccess=t.fetchListSuccess,e.fetchTagList=n.fetchTagList,e.fetchTagListSuccess=n.fetchTagListSuccess,e.delAccount=t.delAccount,e.editAccount=t.editAccount,e.delSearchRes=i.delSearchRes}).call(this)}finally{}},704:function(t,e,a){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.delSearchRes=function(){return function(t){var e={list:[],scrollTop:0,searchValue:""},a=JSON.stringify(e);localStorage.setItem("__searchRes__",a)}}}).call(this)}finally{}},705:function(t,e,a){try{(function(){"use strict";function t(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchTagListSuccess=e.fetchTagList=void 0;var n=(a(255),a(163)),i=t(n),r=(e.fetchTagList=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){var a=[],n=void 0;n=t?JSON.parse(localStorage.getItem("expenseTagList")):JSON.parse(localStorage.getItem("incomeTagList")),null!==n&&(a=n.list),e(r(a))}},e.fetchTagListSuccess=function(t){return{type:i.FETCH_TAGLIST_SUCCESS,list:t}})}).call(this)}finally{}},783:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),c=a(5),o=t(c),l=a(61),u=t(l),f=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.goBack=t.goBack.bind(t),t}return r(e,t),s(e,[{key:"goBack",value:function(){this.context.router.goBack()}},{key:"render",value:function(){return o.default.createElement("header",{className:"back-header flex-between"},o.default.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true",onClick:this.goBack}),this.props.children)}}]),e}(o.default.Component);f.contextTypes={router:u.default.object.isRequired},e.default=f}).call(this)}finally{}},808:function(t,e,a){e=t.exports=a(161)(void 0),e.push([t.i,".statistics-container .fa-bar-chart{font-size:.938667rem}.statistics-container .month-select-panel{background:#f8f8f8;padding:.426667rem 0;font-size:.682667rem}.statistics-container .month-select-panel .fa{font-size:.938667rem;color:#9f9f9f;min-width:2.133333rem;text-align:center}.statistics-container .month-select-panel span p{display:inline-block;color:#f6c87a}.statistics-container .month-select-panel span label{margin:0 .426667rem;font-weight:400;font-size:.597333rem;color:#9f9f9f}.statistics-container .char-box{position:relative;background:#fff;padding:0 1.28rem;border-bottom:.042667rem solid #e8e8e8}.statistics-container .char-box .charts{height:13.44rem}.statistics-container .char-box .total-label{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:14;text-align:center;font-size:.938667rem;font-weight:700}.statistics-container .char-box .total-label p{color:#f6c87a;font-size:.597333rem;margin-top:.298667rem}.statistics-container .charts-label-list{height:8.234667rem;overflow:auto;background:#fff;padding-left:.64rem;min-height:8.234667rem}.statistics-container .charts-label-list .charts-label-list__item{padding:.64rem .64rem .64rem .426667rem;border-bottom:.042667rem solid #e8e8e8;font-size:.810667rem}.statistics-container .charts-label-list .charts-label-list__item .tagName-icon{font-size:.768rem}.statistics-container .charts-label-list .charts-label-list__item .tagName-icon span{margin-left:.853333rem}.statistics-container .charts-label-list .charts-label-list__item label{font-weight:800}",""])},823:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),c=a(5),o=t(c),l=a(783),u=t(l),f=a(201),h=t(f),d=a(255);a(839);var p=function(t,e,a,n){for(var i=[],r=[],s=0;s<t.length;s++){var c=new Date(t[s].header.date).getFullYear(),o=new Date(t[s].header.date).getMonth();c===e&&o===a&&t[s].payList.forEach(function(t){n&&t.isExpense&&(r.push(t.tag.tagName),i.push(t)),n||t.isExpense||(r.push(t.tag.tagName),i.push(t))})}var l=(0,d.unique)(r),u={};return l.forEach(function(t){i.forEach(function(e){t===e.tag.tagName&&(u[t]={cost:parseFloat(u[t]?u[t].cost:0)+parseFloat(e.payNum),tag:e.tag})})}),u},m={chart:{type:"pie"},title:{text:null},credits:{enabled:!1},series:[{innerSize:"40%",data:[]}]},b=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={year:"",month:"",isExpense:!0},t.initData=t.initData.bind(t),t.lastMonth=t.lastMonth.bind(t),t.nextMonth=t.nextMonth.bind(t),t.statisIncome=t.statisIncome.bind(t),t.statisExpense=t.statisExpense.bind(t),t}return r(e,t),s(e,[{key:"componentWillMount",value:function(){var t=this.props.accountList,e=new Date(t.list[0].header.date).getFullYear(),a=new Date(t.list[0].header.date).getMonth();this.initData(t,e,a),this.setState({year:e,month:a})}},{key:"componentDidMount",value:function(){document.querySelector("#chart");this.chart=h.default.chart("chart",m)}},{key:"componentWillReceiveProps",value:function(t){}},{key:"shouldComponentUpdate",value:function(t,e){var a=t.accountList;return e.isExpense?this.initData(a,e.year,e.month):this.initData(a,e.year,e.month,!1),this.chart.update(m),!0}},{key:"initData",value:function(t,e,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=p(t.list,e,a,n),r=[],s=Object.values(i),c=Object.entries(i),o=0,l=void 0;s.forEach(function(t){o+=parseFloat(t.cost)}),c.forEach(function(t){l=parseFloat(t[1].cost)/o*100,t.push(parseInt(l)),r.push({name:t[0],y:t[2],dataLabels:{enabled:!1},color:"#"+t[1].tag.color})}),this.data=c,this.totalCost=o,this.chartData=r.slice(),m.series[0].data=this.chartData}},{key:"lastMonth",value:function(){var t=void 0,e=void 0;1===this.state.month?(t=this.state.year-1,e=11):(t=this.state.year,e=this.state.month-1),this.setState({year:t,month:e})}},{key:"nextMonth",value:function(){var t=void 0,e=void 0;12===this.state.month?(t=this.state.year+1,e=0):(t=this.state.year,e=this.state.month+1),this.setState({year:t,month:e})}},{key:"statisIncome",value:function(){this.state.isExpense&&this.setState({isExpense:!1})}},{key:"statisExpense",value:function(){this.state.isExpense||this.setState({isExpense:!0})}},{key:"render",value:function(){var t=this;return o.default.createElement("section",{className:"container-wrapper statistics-container"},o.default.createElement(u.default,null,o.default.createElement("div",null,o.default.createElement("label",{className:"button-income tab-button "+(this.state.isExpense?"":"selected"),onClick:this.statisIncome},"收入"),o.default.createElement("label",{className:"button-expense tab-button "+(this.state.isExpense?"selected":""),onClick:this.statisExpense},"支出")),o.default.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"})),o.default.createElement("div",{className:"month-select-panel flex-center"},o.default.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true",onClick:this.lastMonth}),o.default.createElement("span",null,o.default.createElement("p",null,this.state.month+1,"-01"),o.default.createElement("label",null,"至"),o.default.createElement("p",null,this.state.month+1,"-30")),o.default.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true",onClick:this.nextMonth})),o.default.createElement("div",{className:"char-box"},o.default.createElement("div",{id:"chart"}),o.default.createElement("div",{className:"total-label"},o.default.createElement("label",null,this.totalCost),o.default.createElement("p",null,"总支出"))),o.default.createElement("div",{className:"charts-label-list"},o.default.createElement("ul",null,0!==this.chartData.length?this.chartData.map(function(e,a){return o.default.createElement("li",{key:a,className:"charts-label-list__item flex-between"},o.default.createElement("span",{className:"tagName-icon"},o.default.createElement("i",{className:"tag-icon fa fa-"+t.data[a][1].tag.icon,"aria-hidden":"true",style:{color:"#"+t.data[a][1].tag.color}}),o.default.createElement("span",null,e.name)),o.default.createElement("span",null,e.y,"%"),o.default.createElement("label",null,t.data[a][1].cost))}):"")))}}]),e}(o.default.Component);e.default=b}).call(this)}finally{}},839:function(t,e,a){var n=a(808);"string"==typeof n&&(n=[[t.i,n,""]]);var i,r={};r.transform=i;a(162)(n,r);n.locals&&(t.exports=n.locals)}});